/*! service-centers - v1.0.0 */
import{app as map}from"./map.js";import Select from"./select.js";(()=>{const e={get:async(e="")=>{if(e.length)return await fetch(e,{cache:"force-cache",mode:"cors"}).then(e=>e.json()).then(e=>e)},map:{init:()=>map.init("#service-centers-map")},menu:{render:({address:e="",cell:n="",coordinates:t={},email:s="",hours:a="",id:i="",phone:o="",selected:c=!1,title:r=""})=>`<div class="service-centers__menu__item">\n                    <input type="radio" name="centro-servicio" id="${i}" ${c?"checked":""}>\n                    <label for="${i}">${r}</label>\n                    <div class="service-centers__menu__item__body">\n                        <div class="schedules">\n                            <p><strong>Lunes a Viernes:</strong>\n                                11:00 a.m  - 3:00 p.m.</p>\n                            <p><strong>S치bados:</strong>\n                                11:00 a.m - 3:00 p.m.</p>\n                        </div>\n                        <div class="address">\n                            <p><strong>Direcci칩n:</strong>\n                                ${e}</p>\n                        </div>\n                        <div class="email">\n                            <p><strong>Correo electr칩nico:</strong>\n                                <a href="mailto:${s}" target="_blank" rel="nooppener">${s}</a></p>\n                        </div>\n                        ${null!==o?`<div class="phone">\n                            <p><strong>Contacto telef칩nico:</strong>\n                                ${o}</p>\n                        </div>`:""}\n                    </div>\n                </div>`},select:{init:()=>{document.querySelectorAll("[data-custom-select").forEach(e=>new Select(e))}}},n=document.getElementById("departamento"),t=document.getElementById("ciudad"),s=document.getElementById("categoria"),a=new Option(`Selecciona un ${n.labels[0].textContent.toLowerCase()}`,0,!0,!0),i=new Option(`Selecciona una ${t.labels[0].textContent.toLowerCase()}`,0,!0,!0),o=new Option(`Selecciona una ${s.labels[0].textContent.toLowerCase()}`,0,!0,!0),c=document.querySelector(".service-centers__menu"),r=new Event("updated");let p=[],d=!0;function l({servicePointsCodes:n,stores:t}=options){c.innerHTML="",(n=[...new Set(n)]).map(n=>{let s={id:n,selected:d};return d=!1,s={...s,...t[n]},c.insertAdjacentHTML("beforeend",e.menu.render(s))})}n.append(a),t.append(i),s.append(o),void 0!==serviceCentersJsonFile&&e.get(serviceCentersJsonFile).then(({categories:a,cities:c,stores:m})=>{Object.entries(c).map(e=>{const t=e[1],s=e[0],a=new Option(t.name,s);n.append(a)}),Object.values(e).map(e=>void 0!==e.init?e.init.call():""),n.addEventListener("change",()=>{d=!0,t.innerHTML="",t.append(i),Object.values(c[n.value].cities).map(({categories:e})=>Object.values(e).map(({stores:e})=>e.map(e=>{p.push(e)}))),l({servicePointsCodes:p,stores:m}),Object.entries(c[n.value].cities).map(e=>{const n=e[1],s=e[0],a=new Option(n.name,s);t.append(a)}),t.dispatchEvent(r),s.innerHTML="",s.append(o),s.dispatchEvent(r),p=[]}),t.addEventListener("change",()=>{d=!0,s.innerHTML="",s.append(o),Object.values(c[n.value].cities[t.value].categories).map(({stores:e})=>e.map(e=>{p.push(e)})),l({servicePointsCodes:p,stores:m}),Object.entries(c[n.value].cities[t.value].categories).map(e=>{const n=a[e[0]].name,t=e[0],i=new Option(n,t);s.append(i)}),s.dispatchEvent(r),p=[]}),s.addEventListener("change",()=>{d=!0,Object.values(c[n.value].cities[t.value].categories[s.value].stores).map(e=>{p.push(e)}),l({servicePointsCodes:p,stores:m}),p=[]})})})();
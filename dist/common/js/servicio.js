/*! service-centers - release: 1.0.9 */
class e{constructor(e){this.element=e,this.label=e.labels[0],this.options=a(e.querySelectorAll("option")),this.customElement=document.createElement("div"),this.arrowElement=document.createElement("span"),this.labelElement=document.createElement("span"),this.valueElement=document.createElement("span"),this.optionsCustomElement=document.createElement("ul"),function(e){HTMLSelectElement.prototype.refresh=function(){this.dispatchEvent(new Event("refresh"))},e.element.disabled&&e.customElement.classList.add("disabled");e.customElement.classList.add("custom-select__container"),e.customElement.tabIndex=0,e.customElement.setAttribute("aria-labelledby",`${e.element.id}-label`),e.labelElement.classList.add("custom-select__label"),e.labelElement.id=`${e.element.id}-label`,e.labelElement.innerText=e.label.textContent,e.customElement.append(e.labelElement);const s=document.createElement("span");s.classList.add("alk-icon-arrow-down"),e.arrowElement.append(s),e.arrowElement.classList.add("custom-select__arrow"),e.customElement.append(e.arrowElement),e.valueElement.classList.add("custom-select__value"),e.valueElement.innerText=e.selectedOption.label,e.customElement.append(e.valueElement),e.optionsCustomElement.classList.add("custom-select__options"),n(e),e.customElement.append(e.optionsCustomElement),e.element.addEventListener("refresh",(()=>{e.element.disabled?e.customElement.classList.add("disabled"):e.customElement.classList.remove("disabled"),e.options=a(e.element.querySelectorAll("option")),e.valueElement.innerText=e.selectedOption.label,e.valueElement.dataset.status="",n(e)})),e.arrowElement.addEventListener("click",(()=>t(e))),e.valueElement.addEventListener("click",(()=>t(e))),e.customElement.addEventListener("blur",(()=>{e.arrowElement.querySelector("span").classList.replace("alk-icon-arrow-up","alk-icon-arrow-down"),e.optionsCustomElement.classList.remove("show")}))}(this),this.element.style.display="none",this.element.setAttribute("aria-hidden",!0),this.label.style.display="none",e.after(this.customElement)}get selectedOption(){return this.options.find((e=>e.selected))}selectValue(e){const t=this.options.find((t=>t.value===e)),n=this.selectedOption;n.selected=!1,n.element.selected=!1,t.selected=!0,t.element.selected=!0,this.element.dispatchEvent(new Event("change")),this.valueElement.innerText=t.label,this.valueElement.dataset.status="filled"}}function t(e){if(e.customElement.classList.contains("disabled"))return;const t=e.arrowElement.querySelector("span");t.classList.contains("alk-icon-arrow-down")?t.classList.replace("alk-icon-arrow-down","alk-icon-arrow-up"):t.classList.replace("alk-icon-arrow-up","alk-icon-arrow-down"),e.optionsCustomElement.classList.toggle("show")}function n(e){e.optionsCustomElement.innerHtml="",e.optionsCustomElement.querySelectorAll("*").forEach((e=>e.remove())),e.options.forEach((t=>{const n=document.createElement("li");n.classList.add("custom-select__option"),n.classList.toggle("selected",t.selected),n.setAttribute("role","option"),t.selected&&n.setAttribute("aria-selected",!0),n.innerText=t.label,n.dataset.value=t.value,"0"===t.value&&(n.style.display="none"),n.addEventListener("click",(()=>{if("0"===n.dataset.value)return;let a=e.optionsCustomElement.querySelector(`[data-value="${e.selectedOption.value}"]`);a.removeAttribute("aria-selected"),a.classList.remove("selected"),e.selectValue(t.value),n.classList.add("selected"),n.setAttribute("aria-selected",!0),e.optionsCustomElement.classList.remove("show"),e.customElement.blur()})),e.optionsCustomElement.append(n)}))}function a(e){return[...e].map((e=>({value:e.value,label:e.label,selected:e.selected,element:e})))}((t,n,a)=>{const s=async(e="")=>{if(e.length)return await fetch(e,{cache:"force-cache",mode:"cors"}).then((e=>e.json())).then((e=>e))},l={init:async()=>{const e=await import("./servicio-ceb42615.js");L=new e.default({$element:"#service-centers-map",baseSite:t.site}),a.addEventListener("click",(e=>{e.target.classList.contains("service-centers__map__info-window__close")&&L.infoWindow.close()})),n.onresize=()=>{n.innerWidth>v&&"0"!=a.getElementById("departamento").value?a.querySelector(".service-centers__map").style.display="block":a.querySelector(".service-centers__map").style.display="none"}}},o={render:({active:e,address:t,areaCode:n,cellphone:a,id:s,map:l,name:o,phone:r})=>{let i="",c="";for(const e of r)i+=`<a href="tel:+57${n}${e.replace(/\s/g,"")}" title="Llamar a ${o}">${e}</a>`;for(const e of a)c+=`<a href="tel:+57${e.replace(/\s/g,"")}" title="Llamar a ${o}">${e}</a>`;return`<div class="service-centers__menu__item">\n                    <input type="radio" name="centro-servicio" id="${s}" ${e?"checked":""}>\n                    <label for="${s}">${o}<span class="${e?"alk-icon-arrow-up":"alk-icon-arrow-down"}"></span></label>\n                    <div class="service-centers__menu__item__body" data-service-center="${s}">\n                        <div class="address">\n                            <p><strong><i class="alk-icon-rounded-position"></i> Dirección:</strong>\n                                ${t}</p>\n                        </div>\n                        <div class="contact-phones">\n                            ${r.length?`<div class="phone">\n                                <p><strong><i class="alk-icon-customer-contact"></i> Contacto telefónico:</strong>\n                                    ${i}\n                                </p>\n                            </div>`:""}\n                            ${a.length?`<div class="cell">\n                                <p><strong><i class="alk-icon-phone-contact"></i> Celular:</strong>\n                                    ${c}\n                                </p>\n                            </div>`:""}\n                        </div>\n                        <div class="how-to-get">\n                            <p>\n                                <i class="alk-icon-arrive"></i><a rel="noopener" href="${l}" title="Indicaciones para llegar a ${o}" target="_blank">¿Cómo llegar?</a>\n                            </p>\n                        </div>\n                    </div>\n                </div>`},toogleArrow:()=>{const e=a.querySelectorAll(".service-centers__menu__item > input");e.forEach((t=>{t.addEventListener("change",(t=>{e.forEach((e=>{const n=e.nextElementSibling.querySelector("span");t.target===e?n.classList.replace("alk-icon-arrow-down","alk-icon-arrow-up"):n.classList.replace("alk-icon-arrow-up","alk-icon-arrow-down")}))}))}))},animateMarker:()=>{a.querySelectorAll(".service-centers__menu__item__body").forEach((e=>{e.addEventListener("mouseenter",(()=>{L.bounceMarker(e.dataset.serviceCenter,"start")})),e.addEventListener("mouseleave",(()=>{L.bounceMarker(e.dataset.serviceCenter,"stop")}))}))}},r={init:()=>a.querySelectorAll("[data-custom-select").forEach((t=>new e(t)))},i=a.getElementById("marca"),c=a.getElementById("departamento"),d=a.getElementById("ciudad"),u=a.getElementById("categoria"),m=new Option("Selecciona una opción",0,!0,!0),p=a.querySelector(".service-centers__menu"),v=Number(getComputedStyle(a.documentElement).getPropertyValue("--service-centers-breakpoint").replace("px",""));let E=m,h=m,w=m,b=m,f=!0,L=null,y=new Array,g=new Array,_=new Array;async function C({servicePointsCodes:e,serviceCenters:t}){const n=await import("./servicio-4cf65916.js"),a=[];let s="";return e.map((({code:e,areaCode:t})=>{a.push(e),s=t})),e=[...new Set(a)],await e.map((e=>{let a={id:e,areaCode:s,coordinates:{lat:t[e].lat,lng:t[e].lng}};return a={...a,...t[e]},new n.default(a)}))}function k(e){p.innerHTML="",L.setMarkers(e),e.map((e=>(e.active=f,f=!1,p.insertAdjacentHTML("beforeend",o.render(e))))),o.toogleArrow(),o.animateMarker()}a.addEventListener("updateCenter",(e=>{const t=e.detail.center;if(null!==t){const e=a.getElementById(t);e.click(),setTimeout((()=>a.querySelector(".service-centers__menu").scrollTop=e.offsetTop),250)}})),null!==i&&(E=new Option(`Selecciona una ${i.labels[0].textContent.toLowerCase()}`,0,!0,!0),i.append(E)),null!==c&&(h=new Option(`Selecciona un ${c.labels[0].textContent.toLowerCase()}`,0,!0,!0),c.append(h),null!==i&&(c.disabled=!0)),null!==d&&(w=new Option(`Selecciona una ${d.labels[0].textContent.toLowerCase()}`,0,!0,!0),d.append(w),d.disabled=!0),null!==u&&(b=new Option(`Selecciona una ${u.labels[0].textContent.toLowerCase()}`,0,!0,!0),u.append(b),u.disabled=!0),r.init(),void 0!==t.jsonFile&&s(t.jsonFile).then((async({brands:e,categories:t,departments:s,serviceCenters:o})=>{await l.init(),void 0!==e&&null!==i&&(Object.entries(e).map((async e=>{const t=e[1],n=e[0],a=new Option(t.name,n);return i.append(a)})),i.refresh(),i.addEventListener("change",(async()=>{f=!0,c.innerHTML="",c.append(h),L.infoWindow.close(),e[i.value].departments.map((e=>{const t=new Option(s[e].name,e);return c.append(t)})),c.disabled=!1,c.refresh(),d.innerHTML="",d.disabled=!0,d.append(w),d.refresh(),u.innerHTML="",u.disabled=!0,u.append(b),u.refresh(),_=[]}))),void 0!==s&&null!==c&&(Object.entries(s).map((e=>{const t=e[1],n=e[0],a=new Option(t.name,n);return c.append(a)})),c.refresh(),c.addEventListener("change",(async()=>{y=[],g=[],f=!0,d.innerHTML="",d.append(w),L.infoWindow.close(),n.innerWidth>v&&(a.querySelector(".service-centers__map").style.display="block"),a.querySelector(".msje-localiza").innerText="Localiza los centros de servicio técnico:",Object.entries(s[c.value].cities).map((e=>{const t=e[0];return Object.entries(e[1].categories).map((n=>n[1].stores.map((a=>{const s={code:a,areaCode:e[1].areaCode};return null===i?_.push(s):a.match(i.value)?(y.push(t),g.push(n[0]),_.push(s)):void 0}))))})),await C({servicePointsCodes:_,serviceCenters:o}).then((e=>k(e))),y=[...new Set(y)],g=[...new Set(g)],Object.entries(s[c.value].cities).map((e=>{if(!y.length){const t=e[1],n=e[0],a=new Option(t.name,n);return d.append(a)}y.map((t=>{if(e[0]===t){const n=e[1],a=new Option(n.name,t);return d.append(a)}}))})),d.disabled=!1,d.refresh(),u.innerHTML="",u.disabled=!0,u.append(b),u.refresh(),_=[]}))),null!==d&&d.addEventListener("change",(async()=>{f=!0,u.innerHTML="",u.append(b),Object.values(s[c.value].cities[d.value].categories).map((({stores:e})=>e.map((e=>{const t={code:e,areaCode:s[c.value].cities[d.value].areaCode};return null===i||e.match(i.value)?_.push(t):void 0})))),await C({servicePointsCodes:_,serviceCenters:o}).then((e=>k(e))),Object.entries(s[c.value].cities[d.value].categories).map((e=>{if(!g.length){const n=t[e[0]].name,a=e[0],s=new Option(n,a);return u.append(s)}g.map((n=>{if(e[0]===n){const e=t[n].name,a=new Option(e,n);return u.append(a)}}))})),u.disabled=!1,u.refresh(),_=[]})),void 0!==t&&null!==u&&u.addEventListener("change",(async()=>{f=!0,Object.values(s[c.value].cities[d.value].categories[u.value].stores).map((e=>{const t={code:e,areaCode:s[c.value].cities[d.value].areaCode};return _.push(t)})),await C({servicePointsCodes:_,serviceCenters:o}).then((e=>k(e))),_=[]}))}))})(appConfig,window,document);

/*! service-centers - release: 1.0.9 */
const e=new WeakMap,t=t=>"function"==typeof t&&e.has(t),n="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,s=(e,t,n=null)=>{for(;t!==n;){const n=t.nextSibling;e.removeChild(t),t=n}},i={},o={},a=`{{lit-${String(Math.random()).slice(2)}}}`,l=`\x3c!--${a}--\x3e`,r=new RegExp(`${a}|${l}`);class c{constructor(e,t){this.parts=[],this.element=t;const n=[],s=[],i=document.createTreeWalker(t.content,133,null,!1);let o=0,l=-1,c=0;const{strings:u,values:{length:h}}=e;for(;c<h;){const e=i.nextNode();if(null!==e){if(l++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:n}=t;let s=0;for(let e=0;e<n;e++)d(t[e].name,"$lit$")&&s++;for(;s-- >0;){const t=u[c],n=m.exec(t)[2],s=n.toLowerCase()+"$lit$",i=e.getAttribute(s);e.removeAttribute(s);const o=i.split(r);this.parts.push({type:"attribute",index:l,name:n,strings:o}),c+=o.length-1}}"TEMPLATE"===e.tagName&&(s.push(e),i.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(a)>=0){const s=e.parentNode,i=t.split(r),o=i.length-1;for(let t=0;t<o;t++){let n,o=i[t];if(""===o)n=p();else{const e=m.exec(o);null!==e&&d(e[2],"$lit$")&&(o=o.slice(0,e.index)+e[1]+e[2].slice(0,-"$lit$".length)+e[3]),n=document.createTextNode(o)}s.insertBefore(n,e),this.parts.push({type:"node",index:++l})}""===i[o]?(s.insertBefore(p(),e),n.push(e)):e.data=i[o],c+=o}}else if(8===e.nodeType)if(e.data===a){const t=e.parentNode;null!==e.previousSibling&&l!==o||(l++,t.insertBefore(p(),e)),o=l,this.parts.push({type:"node",index:l}),null===e.nextSibling?e.data="":(n.push(e),l--),c++}else{let t=-1;for(;-1!==(t=e.data.indexOf(a,t+1));)this.parts.push({type:"node",index:-1}),c++}}else i.currentNode=s.pop()}for(const e of n)e.parentNode.removeChild(e)}}const d=(e,t)=>{const n=e.length-t.length;return n>=0&&e.slice(n)===t},u=e=>-1!==e.index,p=()=>document.createComment(""),m=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class h{constructor(e,t,n){this.__parts=[],this.template=e,this.processor=t,this.options=n}update(e){let t=0;for(const n of this.__parts)void 0!==n&&n.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=n?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],s=this.template.parts,i=document.createTreeWalker(e,133,null,!1);let o,a=0,l=0,r=i.nextNode();for(;a<s.length;)if(o=s[a],u(o)){for(;l<o.index;)l++,"TEMPLATE"===r.nodeName&&(t.push(r),i.currentNode=r.content),null===(r=i.nextNode())&&(i.currentNode=t.pop(),r=i.nextNode());if("node"===o.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(r.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(r,o.name,o.strings,this.options));a++}else this.__parts.push(void 0),a++;return n&&(document.adoptNode(e),customElements.upgrade(e)),e}}const v=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),_=` ${a} `;class f{constructor(e,t,n,s){this.strings=e,this.values=t,this.type=n,this.processor=s}getHTML(){const e=this.strings.length-1;let t="",n=!1;for(let s=0;s<e;s++){const e=this.strings[s],i=e.lastIndexOf("\x3c!--");n=(i>-1||n)&&-1===e.indexOf("--\x3e",i+1);const o=m.exec(e);t+=null===o?e+(n?_:l):e.substr(0,o.index)+o[1]+o[2]+"$lit$"+o[3]+a}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return void 0!==v&&(t=v.createHTML(t)),e.innerHTML=t,e}}const g=e=>null===e||!("object"==typeof e||"function"==typeof e),w=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class E{constructor(e,t,n){this.dirty=!0,this.element=e,this.name=t,this.strings=n,this.parts=[];for(let e=0;e<n.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new y(this)}_getValue(){const e=this.strings,t=e.length-1,n=this.parts;if(1===t&&""===e[0]&&""===e[1]){const e=n[0].value;if("symbol"==typeof e)return String(e);if("string"==typeof e||!w(e))return e}let s="";for(let i=0;i<t;i++){s+=e[i];const t=n[i];if(void 0!==t){const e=t.value;if(g(e)||!w(e))s+="string"==typeof e?e:String(e);else for(const t of e)s+="string"==typeof t?t:String(t)}}return s+=e[t],s}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class y{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===i||g(e)&&e===this.value||(this.value=e,t(e)||(this.committer.dirty=!0))}commit(){for(;t(this.value);){const e=this.value;this.value=i,e(this)}this.value!==i&&this.committer.commit()}}class b{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(p()),this.endNode=e.appendChild(p())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=p()),e.__insert(this.endNode=p())}insertAfterPart(e){e.__insert(this.startNode=p()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;t(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=i,e(this)}const e=this.__pendingValue;e!==i&&(g(e)?e!==this.value&&this.__commitText(e):e instanceof f?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):w(e)?this.__commitIterable(e):e===o?(this.value=o,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,n="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=n:this.__commitNode(document.createTextNode(n)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof h&&this.value.template===t)this.value.update(e.values);else{const n=new h(t,e.processor,this.options),s=n._clone();n.update(e.values),this.__commitNode(s),this.value=n}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let n,s=0;for(const i of e)n=t[s],void 0===n&&(n=new b(this.options),t.push(n),0===s?n.appendIntoPart(this):n.insertAfterPart(t[s-1])),n.setValue(i),n.commit(),s++;s<t.length&&(t.length=s,this.clear(n&&n.endNode))}clear(e=this.startNode){s(this.startNode.parentNode,e.nextSibling,this.endNode)}}class x{constructor(e,t,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=n}setValue(e){this.__pendingValue=e}commit(){for(;t(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=i,e(this)}if(this.__pendingValue===i)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=i}}class L extends E{constructor(e,t,n){super(e,t,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new C(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class C extends y{}let N=!1;(()=>{try{const e={get capture(){return N=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();class T{constructor(e,t,n){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=n,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;t(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=i,e(this)}if(this.__pendingValue===i)return;const e=this.__pendingValue,n=this.value,s=null==e||null!=n&&(e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive),o=null!=e&&(null==n||s);s&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),o&&(this.__options=S(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=i}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const S=e=>e&&(N?{capture:e.capture,passive:e.passive,once:e.once}:e.capture);const V=new class{handleAttributeExpressions(e,t,n,s){const i=t[0];if("."===i){return new L(e,t.slice(1),n).parts}if("@"===i)return[new T(e,t.slice(1),s.eventContext)];if("?"===i)return[new x(e,t.slice(1),n)];return new E(e,t,n).parts}handleTextExpression(e){return new b(e)}};function A(e){let t=O.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},O.set(e.type,t));let n=t.stringsArray.get(e.strings);if(void 0!==n)return n;const s=e.strings.join(a);return n=t.keyString.get(s),void 0===n&&(n=new c(e,e.getTemplateElement()),t.keyString.set(s,n)),t.stringsArray.set(e.strings,n),n}const O=new Map,k=new WeakMap;"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.0");const $=(e,...t)=>new f(e,t,"html",V);class M{constructor(e){this.element=e,this.label=e.labels[0],this.options=P(e.querySelectorAll("option")),this.customElement=document.createElement("div"),this.arrowElement=document.createElement("span"),this.labelElement=document.createElement("span"),this.valueElement=document.createElement("span"),this.optionsCustomElement=document.createElement("ul"),function(e){HTMLSelectElement.prototype.refresh=function(){this.dispatchEvent(new Event("refresh"))},e.element.disabled&&e.customElement.classList.add("disabled");e.customElement.classList.add("custom-select__container"),e.customElement.tabIndex=0,e.customElement.setAttribute("aria-labelledby",`${e.element.id}-label`),e.labelElement.classList.add("custom-select__label"),e.labelElement.id=`${e.element.id}-label`,e.labelElement.innerText=e.label.textContent,e.customElement.append(e.labelElement);const t=document.createElement("span");t.classList.add("alk-icon-arrow-down"),e.arrowElement.append(t),e.arrowElement.classList.add("custom-select__arrow"),e.customElement.append(e.arrowElement),e.valueElement.classList.add("custom-select__value"),e.valueElement.innerText=e.selectedOption.label,e.customElement.append(e.valueElement),e.optionsCustomElement.classList.add("custom-select__options"),j(e),e.customElement.append(e.optionsCustomElement),e.element.addEventListener("refresh",(()=>{e.element.disabled?e.customElement.classList.add("disabled"):e.customElement.classList.remove("disabled"),e.options=P(e.element.querySelectorAll("option")),e.valueElement.innerText=e.selectedOption.label,e.valueElement.dataset.status="",j(e)})),e.arrowElement.addEventListener("click",(()=>H(e))),e.valueElement.addEventListener("click",(()=>H(e))),e.customElement.addEventListener("blur",(()=>{e.arrowElement.querySelector("span").classList.replace("alk-icon-arrow-up","alk-icon-arrow-down"),e.optionsCustomElement.classList.remove("show")}))}(this),this.element.style.display="none",this.element.setAttribute("aria-hidden",!0),this.label.style.display="none",e.after(this.customElement)}get selectedOption(){return this.options.find((e=>e.selected))}selectValue(e){const t=this.options.find((t=>t.value===e)),n=this.selectedOption;n.selected=!1,n.element.selected=!1,t.selected=!0,t.element.selected=!0,this.element.dispatchEvent(new Event("change")),this.valueElement.innerText=t.label,this.valueElement.dataset.status="filled"}}function H(e){if(e.customElement.classList.contains("disabled"))return;const t=e.arrowElement.querySelector("span");t.classList.contains("alk-icon-arrow-down")?t.classList.replace("alk-icon-arrow-down","alk-icon-arrow-up"):t.classList.replace("alk-icon-arrow-up","alk-icon-arrow-down"),e.optionsCustomElement.classList.toggle("show")}function j(e){e.optionsCustomElement.innerHtml="",e.optionsCustomElement.querySelectorAll("*").forEach((e=>e.remove())),e.options.forEach((t=>{const n=document.createElement("li");n.classList.add("custom-select__option"),n.classList.toggle("selected",t.selected),n.setAttribute("role","option"),t.selected&&n.setAttribute("aria-selected",!0),n.innerText=t.label,n.dataset.value=t.value,"0"===t.value&&(n.style.display="none"),n.addEventListener("click",(()=>{if("0"===n.dataset.value)return;let s=e.optionsCustomElement.querySelector(`[data-value="${e.selectedOption.value}"]`);s.removeAttribute("aria-selected"),s.classList.remove("selected"),e.selectValue(t.value),n.classList.add("selected"),n.setAttribute("aria-selected",!0),e.optionsCustomElement.classList.remove("show"),e.customElement.blur()})),e.optionsCustomElement.append(n)}))}function P(e){return[...e].map((e=>({value:e.value,label:e.label,selected:e.selected,element:e})))}const I=async(e="")=>{if(e.length)return await fetch(e,{cache:"force-cache",mode:"cors"}).then((e=>e.json())).then((e=>e))},q={init:async()=>{const e=await import("./servicio-ceb42615.js");Y=new e.default({$element:"#service-centers-map",baseSite:appConfig.site}),document.addEventListener("click",(e=>{e.target.classList.contains("service-centers__map__info-window__close")&&Y.infoWindow.close()})),window.onresize=()=>{window.innerWidth>G&&"0"!=document.getElementById("departamento").value?document.querySelector(".service-centers__map").style.display="block":document.querySelector(".service-centers__map").style.display="none"}}},B=document.getElementById("marca"),W=document.getElementById("departamento"),F=document.getElementById("ciudad"),z=document.getElementById("categoria"),R=new Option("Selecciona una opción",0,!0,!0),D=document.querySelector(".service-centers__menu"),G=Number(getComputedStyle(document.documentElement).getPropertyValue("--service-centers-breakpoint").replace("px",""));let J=R,K=R,Q=R,U=R,X=!0,Y=null,Z=new Array,ee=new Array,te=new Array;async function ne({servicePointsCodes:e,serviceCenters:t}){const n=await import("./servicio-4cf65916.js"),s=[];let i="";return e.map((({code:e,areaCode:t})=>{s.push(e),i=t})),e=[...new Set(s)],await e.map((e=>{let s={id:e,areaCode:i,coordinates:{lat:t[e].lat,lng:t[e].lng}};return s={...s,...t[e]},new n.default(s)}))}async function se(e){const t=await import("./servicio-deece0de.js"),n=[];return D.innerHTML="",Y.setMarkers(e),e.map((e=>(e.active=X,X=!1,n.push(new t.default(e,Y).item())))),((e,t,n)=>{let i=k.get(t);void 0===i&&(s(t,t.firstChild),k.set(t,i=new b(Object.assign({templateFactory:A},n))),i.appendInto(t)),i.setValue(e),i.commit()})(n,D)}document.addEventListener("updateCenter",(e=>{const t=e.detail.center;if(null!==t){const e=document.getElementById(t);e.click(),setTimeout((()=>D.scrollTop=e.offsetTop),250)}})),null!==B&&(J=new Option(`Selecciona una ${B.labels[0].textContent.toLowerCase()}`,0,!0,!0),B.append(J)),null!==W&&(K=new Option(`Selecciona un ${W.labels[0].textContent.toLowerCase()}`,0,!0,!0),W.append(K),null!==B&&(W.disabled=!0)),null!==F&&(Q=new Option(`Selecciona una ${F.labels[0].textContent.toLowerCase()}`,0,!0,!0),F.append(Q),F.disabled=!0),null!==z&&(U=new Option(`Selecciona una ${z.labels[0].textContent.toLowerCase()}`,0,!0,!0),z.append(U),z.disabled=!0),document.querySelectorAll("[data-custom-select]").forEach((e=>new M(e))),void 0!==appConfig.jsonFile&&I(appConfig.jsonFile).then((async({brands:e,categories:t,departments:n,serviceCenters:s})=>{await q.init(),void 0!==e&&null!==B&&(Object.entries(e).map((async e=>{const t=e[1],n=e[0],s=new Option(t.name,n);return B.append(s)})),B.refresh(),B.addEventListener("change",(async()=>{X=!0,W.innerHTML="",W.append(K),Y.infoWindow.close(),e[B.value].departments.map((e=>{const t=new Option(n[e].name,e);return W.append(t)})),W.disabled=!1,W.refresh(),F.innerHTML="",F.disabled=!0,F.append(Q),F.refresh(),z.innerHTML="",z.disabled=!0,z.append(U),z.refresh(),te=[]}))),void 0!==n&&null!==W&&(Object.entries(n).map((e=>{const t=e[1],n=e[0],s=new Option(t.name,n);return W.append(s)})),W.refresh(),W.addEventListener("change",(async()=>{Z=[],ee=[],X=!0,F.innerHTML="",F.append(Q),Y.infoWindow.close(),window.innerWidth>G&&(document.querySelector(".service-centers__map").style.display="block"),document.querySelector(".msje-localiza").innerText="Localiza los centros de servicio técnico:",Object.entries(n[W.value].cities).map((e=>{const t=e[0];return Object.entries(e[1].categories).map((n=>n[1].stores.map((s=>{const i={code:s,areaCode:e[1].areaCode};return null===B?te.push(i):s.match(B.value)?(Z.push(t),ee.push(n[0]),te.push(i)):void 0}))))})),await ne({servicePointsCodes:te,serviceCenters:s}).then((e=>se(e))),Z=[...new Set(Z)],ee=[...new Set(ee)],Object.entries(n[W.value].cities).map((e=>{if(!Z.length){const t=e[1],n=e[0],s=new Option(t.name,n);return F.append(s)}Z.map((t=>{if(e[0]===t){const n=e[1],s=new Option(n.name,t);return F.append(s)}}))})),F.disabled=!1,F.refresh(),z.innerHTML="",z.disabled=!0,z.append(U),z.refresh(),te=[]}))),null!==F&&F.addEventListener("change",(async()=>{X=!0,z.innerHTML="",z.append(U),Object.values(n[W.value].cities[F.value].categories).map((({stores:e})=>e.map((e=>{const t={code:e,areaCode:n[W.value].cities[F.value].areaCode};return null===B||e.match(B.value)?te.push(t):void 0})))),await ne({servicePointsCodes:te,serviceCenters:s}).then((e=>se(e))),Object.entries(n[W.value].cities[F.value].categories).map((e=>{if(!ee.length){const n=t[e[0]].name,s=e[0],i=new Option(n,s);return z.append(i)}ee.map((n=>{if(e[0]===n){const e=t[n].name,s=new Option(e,n);return z.append(s)}}))})),z.disabled=!1,z.refresh(),te=[]})),void 0!==t&&null!==z&&z.addEventListener("change",(async()=>{X=!0,Object.values(n[W.value].cities[F.value].categories[z.value].stores).map((e=>{const t={code:e,areaCode:n[W.value].cities[F.value].areaCode};return te.push(t)})),await ne({servicePointsCodes:te,serviceCenters:s}).then((e=>se(e))),te=[]}))}));export{$ as h};

/*! service-centers - v1.0.0 */
export default class Select{constructor(e){this.element=e,this.label=e.labels[0],this.options=getOptions(e.querySelectorAll("option")),this.customElement=document.createElement("div"),this.labelElement=document.createElement("span"),this.valueElement=document.createElement("span"),this.optionsCustomElement=document.createElement("ul"),initSelect(this),this.element.style.display="none",this.label.style.display="none",e.after(this.customElement)}get selectedOption(){return this.options.find(e=>e.selected)}selectValue(e){const t=this.options.find(t=>t.value===e),l=this.selectedOption;l.selected=!1,l.element.selected=!1,t.selected=!0,t.element.selected=!0,this.element.dispatchEvent(new Event("change")),this.valueElement.innerText=t.label,this.valueElement.dataset.status="filled"}};function initSelect(e){e.customElement.classList.add("custom-select__container"),e.customElement.tabIndex=0,e.labelElement.classList.add("custom-select__label"),e.labelElement.innerText=e.label.textContent,e.customElement.append(e.labelElement),e.valueElement.classList.add("custom-select__value"),e.valueElement.innerText=e.selectedOption.label,e.customElement.append(e.valueElement),e.optionsCustomElement.classList.add("custom-select__options"),renderOptions(e),e.customElement.append(e.optionsCustomElement),e.element.addEventListener("updated",()=>{e.options=getOptions(e.element.querySelectorAll("option")),e.valueElement.innerText=e.selectedOption.label,e.valueElement.dataset.status="",renderOptions(e)}),e.valueElement.addEventListener("click",()=>{e.optionsCustomElement.classList.toggle("show")}),e.customElement.addEventListener("blur",()=>{e.optionsCustomElement.classList.remove("show")})}function renderOptions(e){e.optionsCustomElement.innerHtml="",e.optionsCustomElement.querySelectorAll("*").forEach(e=>e.remove()),e.options.forEach(t=>{const l=document.createElement("li");l.classList.add("custom-select__option"),l.classList.toggle("selected",t.selected),l.innerText=t.label,l.dataset.value=t.value,l.addEventListener("click",()=>{"0"!==l.dataset.value&&(e.optionsCustomElement.querySelector(`[data-value="${e.selectedOption.value}"]`).classList.remove("selected"),e.selectValue(t.value),l.classList.add("selected"),e.optionsCustomElement.classList.remove("show"))}),e.optionsCustomElement.append(l)})}function getOptions(e){return[...e].map(e=>({value:e.value,label:e.label,selected:e.selected,element:e}))}
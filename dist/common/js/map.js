/*! service-centers - v1.0.0 */
export default class Map{constructor({$element:t,baseSite:e}){this.$element=t,this.baseSite=e,this.bounds=new google.maps.LatLngBounds,this.geocoder=new google.maps.Geocoder,this.infoWindow=new google.maps.InfoWindow,this.markers=[],this.map,this.init()}bounceMarker(t,e){this.markers.length&&void 0!==this.markers[t]&&("start"==e?this.markers[t].setAnimation(google.maps.Animation.BOUNCE):this.markers[t].setAnimation(null))}async getGeo(){try{return await getCoordinates().then(t=>t)}catch(t){return t}}async init(){return this.map=await new google.maps.Map(document.querySelector(this.$element),{center:new google.maps.LatLng(4.6482837,-74.2478938),disableDefaultUI:!0,draggable:!0,zoom:10,zoomControl:!0}),this.map}setInfoWindow(t){return`<div class="service-centers__map__info-window">\n            <h4>${t.name}</h4>\n            <p><strong>Direcci√≥n:</strong><br />\n            ${t.address}\n            </p>\n        </div>`}async setMarkers(t){this.bounds=new google.maps.LatLngBounds,this.markers.map(t=>t.setMap(null)),t.map(t=>{const e=new google.maps.Marker({position:new google.maps.LatLng(t.coordinates.lat,t.coordinates.lng),map:this.map,icon:`/dist/${this.baseSite}/img/pin.svg`,title:t.name});e.addListener("click",()=>{this.infoWindow.setContent(this.setInfoWindow(t)),this.infoWindow.open(this.map,e),this.map.panTo(e.getPosition())}),this.bounds.extend(e.getPosition()),this.markers[t.id]=e}),this.map.setCenter(this.bounds.getCenter()),this.map.fitBounds(this.bounds),this.map.getZoom()>18&&this.map.setZoom(18)}};async function getCoordinates(){return new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(e=>{t({lat:e.coords.latitude,lng:e.coords.longitude})},t=>{e(t)})})}